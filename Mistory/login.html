<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/Mistory/css/all.css">
    <link rel="stylesheet" href="/Mistory/css/nav.css">
    <link rel="stylesheet" href="/Mistory/css/dark-mode.css">
    <link rel="stylesheet" href="/Mistory/css/login.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
</head>
<body>

    <header>
        <div class="header_top" style="height:30px; width: auto; background-color: #008156"></div>
        <div class="header_bottom" style="height:70px;">
            <img src="/Mistory/img/logo.png" alt="" style="width:203px; height:auto">
            <nav_menu>
                
            </nav_menu>
            <div id="toggleDarkMode"><i class="bi bi-moon"></i></div>
            <!-- <i class="bi bi-moon-fill"></i> -->
            <i class="bi bi-box-arrow-in-right"></i>
        </div>
    </header>

    <div class="timer" id="timer">05:00</div>
    <script src="/Mistory/js/timer.js"></script>



    <div class="container">
        <div class="login">
            <div class="logoImg"><img src="img/logo.png"/></div>
            <p class="message">발견한 단어를 조합해서 <br/> 로그인 해주세요</p>
            <form action="http://localhost:8080/login" method="POST">
                <input type="text" name="username" placeholder="아이디" id="username"/>
                <input type="password" name="password" placeholder="비밀번호" id="password" />
                <button type="submit" class="loginBtn">로그인</button>
            </form>
        </div>
    </div>


    <script src="/Mistory/js/dark-mood.js"></script>
    <script>

        //화면 로딩
        $(function(){
            $('html').removeClass('no-js');
        });

        function handleLogin(){
            let id = document.getElementById("id").value;
            let password = document.getElementById("password").value;
            const loginContainer = document.getElementsByClassName("login")[0];

            // 기존 메시지와 힌트 버튼 제거
            const existingMessageContainer = document.getElementById("message-container");
            if (existingMessageContainer) {
                existingMessageContainer.remove();
            }

            document.getElementsByClassName('loginBtn').addEventListener('submit', function(event) {
            event.preventDefault(); // 기본 폼 제출 방지

            const formData = new FormData(this);

            fetch(this.action, {
                method: this.method,
                body: formData
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(errorData => {
                        throw new Error('아이디 또는 비밀번호를 잘못 입력했습니다.');
                    });
                }
                return response.json();
            })
            .then(data => {
                alert("로그인 성공!");
                location.href = "http://127.0.0.1:5501/Mistory/ranking.html";
            })
            .catch(error => {
                const messageContainer = document.getElementById('message-container');
                messageContainer.innerHTML = ''; // 기존 메시지 초기화

                // 아이디와 비밀번호가 틀릴 시 나오는 문구
                const fail = document.createElement("p");
                fail.id = "fail-message";
                fail.innerHTML = `아이디 또는 비밀번호를 잘못 입력했습니다. <br/> 입력하신 내용을 다시 확인해주세요.`;
                fail.style.color = "red";
                fail.style.fontSize = "17px";
                fail.style.marginRight = "10px"; // 버튼과 약간의 간격 추가

                const hintBtn = document.createElement("button");
                hintBtn.id = "hint-button";
                hintBtn.innerHTML = "힌트 찾으러가기";
                hintBtn.style.width = "160px";
                hintBtn.style.height = "50px";
                hintBtn.style.backgroundColor = "#fff";
                hintBtn.style.fontSize = "17px";

                messageContainer.appendChild(fail);
                messageContainer.appendChild(hintBtn);

                messageContainer.style.display = "flex"; // 메시지 컨테이너 표시

                // 입력 필드 값 초기화
                document.getElementById("username").value = "";
                document.getElementById("password").value = "";
            });
        });

        }



    </script>

    <hr style="color:#BBBBBB; margin: 250px auto 0; width: 1320px;">

    <footer style="padding: 20px 0; background-color: none;">
        <div class="footer-content" style="max-width: 1320px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;">
            <img src="./img/footer_logo.png" alt="" style="width: 91px; height: 76px; margin-right: 20px;">
            <div class="footer-info" style="flex: 1; min-width: 250px; padding: 10px;">
                <div class="footer-top" style="display: flex; gap: 15px; margin-bottom: 10px; font-size: 13px;">
                    <h3 style="margin: 0;">개인정보보호방침</h3>|<h3 style="margin: 0;">학교정보공개</h3>|<h3 style="margin: 0;">배너모음</h3>
                </div>
                <p style="font-size: 14px; margin-bottom: 8px; margin-top: 0; color: #565555;">(08821) 서울시 관악구 호암로 546 (신림동)</p>
                <div class="footer-middle" style="display: flex; font-size: 14px; margin-bottom: 16px; color: #565555;">
                    <p style="margin: 0;"><strong>교무실</strong> 02-872-4071 (Fax 02-887-0856)</p><span style="margin-left: 5px; margin-right: 5px;">|</span><p style="margin: 0;"><strong>개발채용</strong> 070-5099-8306</p><span style="margin-left: 5px; margin-right: 5px;">|</span><p style="margin: 0;"><strong>디자인채용</strong> 070-5099-8315</p><span style="margin-left: 5px; margin-right: 5px;">|</span><p style="margin: 0;"><strong>취업지원부</strong> 02-888-8350(Fax 02-875-2092)</p><span style="margin-left: 5px; margin-right: 5px;">|</span><p style="margin: 0;"><strong>행정실</strong>  02-886-1812(Fax 02-878-2188)</p>
                </div>                
                <div class="footer-bottom" style="display: flex; gap: 15px; font-weight: bold; font-size: 15px; color: #565555;">
                    <p style="margin: 0;">546Hoam-ro,Gwank-gu, Seoul,08821 Korea</p>
                    <p style="margin: 0;">MIRIM MEISTER SCHOOL</p>
                </div>
            </div>
        </div>
    </footer>
    
</body>
</html>